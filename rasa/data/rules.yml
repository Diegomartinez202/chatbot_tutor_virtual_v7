version: "3.1"
rules:

# Saludo directo
- rule: Saludo
  steps:
    - intent: saludo
    - action: utter_saludo

# Iniciar soporte_form por cualquier problema técnico
- rule: Iniciar soporte (soporte_tecnico)
  steps:
    - intent: soporte_tecnico
    - action: soporte_form
    - active_loop: soporte_form

- rule: Iniciar soporte (otro_problema_tecnico)
  steps:
    - intent: otro_problema_tecnico
    - action: soporte_form
    - active_loop: soporte_form

- rule: Iniciar soporte (no_ingreso)
  steps:
    - intent: problema_no_ingreso
    - action: soporte_form
    - active_loop: soporte_form

- rule: Iniciar soporte (pantalla_blanca)
  steps:
    - intent: pantalla_blanca
    - action: soporte_form
    - active_loop: soporte_form

- rule: Iniciar soporte (error_actividad)
  steps:
    - intent: error_actividad
    - action: soporte_form
    - active_loop: soporte_form

# Submit del soporte_form
- rule: Submit soporte_form
  condition:
    - active_loop: soporte_form
  steps:
    - action: soporte_form
    - active_loop: null
    - action: utter_soporte_resumen
    - action: action_soporte_submit
    - action: utter_soporte_creado

# Flujo de recuperación de contraseña (form solo email)
- rule: Iniciar recovery_form
  steps:
    - intent: recuperar_contrasena
    - action: recovery_form
    - active_loop: recovery_form

- rule: Submit recovery_form
  condition:
    - active_loop: recovery_form
  steps:
    - action: recovery_form
    - active_loop: null
    - action: action_enviar_correo
    - action: utter_confirmar_recuperacion

# Escalar a humano (pregunta)
- rule: Escalar a humano (pregunta)
  steps:
    - intent: escalar_humano
    - action: utter_escalar_humano